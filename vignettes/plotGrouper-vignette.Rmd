---
title: "plotGrouper"
author: 
- name: "John Gagnon"
  affiliation: University of California, San Francisco
  email: john.gagnon.42@gmail.com
package: "plotGrouper"
date: "`r Sys.Date()`"
abstract: >
  plotGrouper is a shiny app wrapper for ggplot2. It is designed to make the 
  visualization of data and statistical analysis as straightforward as possible 
  through the use of dropdown menus and checkboxes. Plots created within the 
  GUI are easily saved as individual PDFs or as reports with many plots. 
  Addition of new data can be achieved by re-importing files and refreshing 
  plots.
output:
  BiocStyle::html_document:
    toc: true
    toc_float: true
vignette: >
  %\VignetteIndexEntry{plotGrouper}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r style, echo = FALSE, results = 'asis'}
  BiocStyle::markdown()
```

## Description

This package was designed as a tool for generating figure-ready graphs from 
data in an excel file. It borrows heavily from packages developed by others, 
including the ggplot2 and dplyr from the tidyverse and batch statistical 
calculations from ggpubr.


Plots can be made using combinations of geoms including bar, violin, box, 
crossbar, density, point, line, and errorbar.
<br><br>
  
## Prerequisites

1. If you do not already have R installed, or your version is out of date, 
download the latest version [Here](https://cran.r-project.org). 


  + Optionally, install the latest version of 
[RStudio Desktop](https://www.rstudio.com/products/rstudio/#Desktop).


2. Download the package from Bioconductor.

```{r getPackage, eval = FALSE}
if (!requireNamespace("BiocManager", quietly = TRUE))
  install.packages("BiocManager")
  BiocManager::install("plotGrouper")
```

 + Or install the development version of the package from Github.

```{r, eval = FALSE}
BiocManager::install(“jdgagnon/plotGrouper”)
```

3. Load the package into the R session.

```{r, eval = FALSE}
library(plotGrouper)
```
<br><br>

## Running plotGrouper

After installing and loading the package, you are ready to run `plotGrouper`.


To initialize the shiny app, paste the following code in your R console 
and run it.


```{r, eval=FALSE}
plotGrouper()
```


Once the web app opens, you can access the `iris` dataset by clicking the iris 
button to learn how to use the app. After the `iris` data loads, the selection 
windows will be automatically populated and a graph should be displayed.  
The `Raw Data` tab displays the structure of the data loaded. Your file should 
be organized to include:  


`Unique identifier | Comparisons | Variables`



These columns can be titled anything you want but values in the columns are 
important.  


* The `Unique identifier` column should contain only unique values that identify 
each individual sample (e.g., `Sample` within `iris` `Raw Data`).


* The `Comparisons` column should contain replicated values that identify each
individual as belonging to a group (e.g., `Species` within `iris` `Raw Data`). 


* The `Variables` column(s) should created for each variable you wish
to plot. The values in these columns must be numeric (e.g., `Sepal.Length`, 
`Sepal.Width`, `Petal.Length`, `Petal.Width` within `iris` `Raw Data`)


After importing a data file, a `Sheet` column will be created and populated 
with the sheet name(s) from the file if it came from an excel spreadsheet
or the file name if it came from a csv or tsv file.


* The `Variables to plot` selection window is used to choose which variable(s) 
to plot (e.g., `Sepal.Width` from the `iris` data). If multiple are selected, 
they will be grouped according to the `Independent variable` selected.


* The `Comparisons` selection window is used to choose which column contains the
information that identifies which condition each sample belongs to (e.g., the
`Species` column within the `iris` data).  


* The `Independent variable` selection window is used to select how the plots
should be grouped. If `variable` is selected (the default), the plots will be 
grouped by the values in `Variables to plot`.


* Use the `Shapes` selector to change the shape of the points for each 
comparison variable.


* Use the `Colors` selector to change the point colors for each 
comparison variable.


* Use the `Fills` selector to change the fill color for the other geoms being 
plotted for each comparison variable.


To prevent the `Shapes`, `Colors`, or `Fills` from reverting to their defaults,
click the `Lock` checkboxes.



Individual plots can be saved by clicking `Save` on the `Plot` tab or multiple
plots may be arranged on a single page by clicking `Add plot to report`.
Clicking this button will send the current plot to the `Report` tab and assign
it a number in the `Report plot #` dropdown menu. To revisit a plot stored in 
the `Report` tab, select the plot you wish to restore and click 
`Load plot from report`. Changes can be made to this plot and then updated in 
the `Report` by clicking `Update plot in report`. 



* The statistics calculated for the current plot being displayed in the `Plot` tab
are stored in the `Statistics` tab. These can be saved by clicking the 
`Download` button on the `Statistics` tab.


* The `Plot Data` tab contains the reorganized subset of data being plotted.


* The `Raw Data` tab displays the dataframe that was created upon import of the 
file along with the automatically created `Sheet` column.



## Session info

Here is the output of `sessionInfo()` on the system on which this package was
developed:

```{r, eval=FALSE}
R version 3.5.1 (2018-07-02)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: macOS High Sierra 10.13.6

Matrix products: default
BLAS: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/3.5/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
character(0)

other attached packages:
[1] plotGrouper_0.99.28

loaded via a namespace (and not attached):
 [1] tidyselect_0.2.4    purrr_0.2.5         splines_3.5.1       lattice_0.20-35     colorspace_1.3-2    miniUI_0.1.1.1      htmltools_0.3.6     yaml_2.2.0         
 [9] grDevices_3.5.1     base64enc_0.1-3     survival_2.42-6     rlang_0.2.2         ggpubr_0.1.8        later_0.7.4         pillar_1.3.0        foreign_0.8-71     
[17] glue_1.3.0          RColorBrewer_1.1-2  readxl_1.1.0        bindrcpp_0.2.2      bindr_0.1.1         plyr_1.8.4          stringr_1.3.1       egg_0.4.0          
[25] cellranger_1.1.0    munsell_0.5.0       gtable_0.2.0        htmlwidgets_1.2     colourpicker_1.0    latticeExtra_0.6-28 knitr_1.20          httpuv_1.4.5       
[33] htmlTable_1.12      methods_3.5.1       Rcpp_0.12.18        readr_1.1.1         acepack_1.4.1       xtable_1.8-3        promises_1.0.1      scales_1.0.0       
[41] backports_1.1.2     checkmate_1.8.5     Hmisc_4.1-1         mime_0.5            gridExtra_2.3       hms_0.4.2           ggplot2_3.0.0       stats_3.5.1        
[49] datasets_3.5.1      graphics_3.5.1      digest_0.6.16       stringi_1.2.4       dplyr_0.7.6         shiny_1.1.0         grid_3.5.1          tools_3.5.1        
[57] magrittr_1.5        lazyeval_0.2.1      shinythemes_1.1.1   tibble_1.4.2        Formula_1.2-3       cluster_2.0.7-1     tidyr_0.8.1         crayon_1.3.4       
[65] pkgconfig_2.0.2     Matrix_1.2-14       data.table_1.11.4   utils_3.5.1         assertthat_0.2.0    base_3.5.1          rstudioapi_0.7      R6_2.2.2           
[73] rpart_4.1-13        nnet_7.3-12         compiler_3.5.1   
```
<br><br>

## License

GNU GPL-3.0-or-later

[licence](https://www.gnu.org/licenses/gpl.txt)

